import{af as h,R as p,ag as f,ah as m,ai as b,aj as g}from"./index-DEk_hmx_.js";import{sendBatchTransaction as w}from"./send-batch-transaction-CA_Ls83O.js";async function T(o){const s=await h(o);return p(s)}const r=new f(1e3);async function C(o){const{account:s,calls:c}=o,t=[],a=g(65);if(r.set(a,t),s.sendBatchTransaction){const e=await w({account:s,transactions:c});t.push(e.transactionHash),r.set(a,t)}else for(const e of c){const i=await T({account:s,transaction:e});t.push(i.transactionHash),r.set(a,t)}return a}async function x(o){const{chain:s,client:c,id:t}=o,a=r.get(t);if(!a)throw new Error("Failed to get calls status, unknown bundle id");const e=m({chain:s,client:c});let i="success";const d=await Promise.all(a.map(l=>b(e,{hash:l}).then(n=>({blockHash:n.blockHash,blockNumber:n.blockNumber,gasUsed:n.gasUsed,logs:n.logs.map(u=>({address:u.address,data:u.data,topics:u.topics})),status:n.status,transactionHash:n.transactionHash})).catch(()=>(i="pending",null))));return{atomic:!1,chainId:s.id,id:t,receipts:d.filter(l=>l!==null),status:i,statusCode:200,version:"2.0.0"}}export{x as inAppWalletGetCallsStatus,C as inAppWalletSendCalls};
